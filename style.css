:root{
 --primary-color:#11735d; --on-primary-color:#E2E8F0;
 --secondary-color:#f7cb4d; --on-secondary-color:#11735d;
 --page-bg-color:#1A2C2C; --card-bg-color:#2D3748;
 --primary-text-color:#63d297; --secondary-text-color:#E2E8F0;
 --outline-color:#4A5568;
 --success-color:#f7cb4d; --error-color:#e53e3e;
}


*{ box-sizing:border-box; margin:0; padding:0; }
html, body {
  height: 100%;
  font-family: 'Open Sans', sans-serif;
  background: var(--page-bg-color);
  color: var(--secondary-text-color);
  font-size: 18px;
  padding: 16px;
  overflow-x: hidden; /* <-- Aggiungi questa riga */
}


/* Card */
.card{
 background:var(--primary-color);
 border:1px solid var(--outline-color);
 border-radius:28px;
 box-shadow:0 4px 8px rgba(0,0,0,.1), 0 6px 20px rgba(0,0,0,.1);
 padding:24px; width:100%; max-width:500px;
 margin:0 auto 12px auto;
 display:none; flex-direction:column; gap:16px;
}
#fase-card{ position:relative; margin-bottom:40px; }
.title-card{ padding:20px; gap:0; }


header h1{
 font-family:'Poppins',sans-serif; font-size:36px; font-weight:700;
 color:var(--primary-text-color); text-align:center; text-transform:uppercase;
 line-height:1.1; margin:0;
}
main{ display:flex; flex-direction:column; gap:16px; }


.form-group{ display:flex; flex-direction:column; }


/* Input */
.input-field{
 width:100%; padding:12px 16px;
 border:1px solid var(--outline-color);
 border-radius:24px; background:var(--page-bg-color);
 color:var(--secondary-text-color); font-size:18px; transition:.2s;
}
.input-field:focus{
 outline:none; border-color:var(--primary-text-color);
 box-shadow:0 0 0 2px #63d29760;
}
.input-field:disabled {
   opacity: 0.6;
   cursor: not-allowed;
   background-color: #2b3544;
}


.slider:disabled {
   cursor: not-allowed;
}


/* Slider + label */
.slider-wrapper{ position:relative; padding:8px 0; display:flex; flex-direction:column; align-items:center; width:100%; }
.slider-label{
 font-family:'Poppins',sans-serif; font-size:32px; font-weight:700;
 color:var(--secondary-color); background:var(--on-secondary-color);
 padding:8px 16px; border-radius:12px; width:fit-content; max-width:100%;
 text-align:center; margin-bottom:8px; height:56px;
 display:flex; align-items:center; justify-content:center; gap:12px;
 position:relative; overflow:hidden;
}
.slider-label img{ width:32px; height:32px; }
#fase-text{ display:inline-block; }


.slider-container{ position:relative; height:48px; display:flex; align-items:center; width:100%; }


/* Thumb container */
#slider-thumb-emoji{
  position:absolute; top:50%; left:0; transform:translate(-50%,-50%);
  width:48px; height:48px; display:grid; justify-content:center; place-items:center;
  pointer-events:none; z-index:3; 
- place
}


/* Cross-fade: due layer img sovrapposti */
#slider-thumb-emoji img{
 grid-area: 1 / 1; width:28px; height:28px;
 transition: opacity 140ms ease; opacity:0; will-change:opacity;
}
#slider-thumb-emoji img.visible{ opacity:1; }
#slider-thumb-emoji img.hidden { opacity:0; }


/* Track & real thumb */
.slider{
 -webkit-appearance:none; appearance:none; width:100%; height:6px;
 background:var(--primary-text-color); border-radius:5px; outline:none;
 position:relative; z-index:1; transition:opacity .2s;
}
.slider::-webkit-slider-thumb{
 -webkit-appearance:none; appearance:none;
 width:48px; height:48px; background:var(--secondary-color);
 border-radius:50%; border:4px solid var(--primary-color);
 box-shadow:0 2px 5px rgba(0,0,0,.4); cursor:pointer; position:relative; z-index:2;
}
.slider::-moz-range-thumb{
 width:48px; height:48px; background:var(--secondary-color);
 border-radius:50%; border:4px solid var(--primary-color);
 box-shadow:0 2px 5px rgba(0,0,0,.4); cursor:pointer;
}


/* Pulsanti azione */
.action-buttons-container{
 position:absolute; top:100%; margin-top:12px; right:0;
 display:flex; gap:16px; z-index:10;
}
.action-btn{
 display:flex; align-items:center; justify-content:center; border-radius:28px;
 font-family:'Poppins',sans-serif; font-size:24px; font-weight:700; cursor:pointer;
 box-shadow:0 4px 12px rgba(0,0,0,.2); transition:all .3s ease-in-out;
 overflow:hidden; border:2px solid transparent;
}
.action-btn .icon{ width:36px; height:36px; }
.action-btn .text{ white-space:nowrap; }
.action-btn.expanded{ width:180px; height:56px; padding:0 24px; gap:8px; }
.action-btn.collapsed{ width:56px; height:56px; padding:0; border-color:var(--primary-color); background:var(--page-bg-color); }
.action-btn.collapsed .text{ display:none; }
#avvio-btn.expanded{ background:var(--secondary-color); color:var(--on-secondary-color); }
#stop-btn.expanded { background:var(--secondary-color); color:var(--on-secondary-color); }
.action-btn:disabled{ opacity:.6; cursor:not-allowed; }


/* Toast + loader */
#toast{
 visibility:hidden; min-width:250px; background:#333; color:#fff; text-align:center;
 border-radius:8px; padding:16px; position:fixed; z-index:100; left:50%; transform:translateX(-50%);
 bottom:30px; font-size:18px; box-shadow:0 4px 10px rgba(0,0,0,.2);
}
#toast.show{ visibility:visible; animation:fadein .5s, fadeout .5s 2.5s; }
#toast.success{ background:var(--success-color); color:var(--on-secondary-color); }
#toast.error{ background:var(--error-color); }


.loader-container{ text-align:center; color:var(--secondary-text-color); }
.loader{
 border:4px solid var(--outline-color); border-top:4px solid var(--primary-color);
 border-radius:50%; width:40px; height:40px; animation:spin 1s linear infinite; margin:0 auto 10px;
}


/* Animazioni */
@keyframes fadeInUp{ from{opacity:0; transform:translateY(100%);} to{opacity:1; transform:translateY(0);} }
@keyframes fadeOutUp{ from{opacity:1; transform:translateY(0);} to{opacity:0; transform:translateY(-100%);} }
@keyframes fadeInDown{ from{opacity:0; transform:translateY(-100%);} to{opacity:1; transform:translateY(0);} }
@keyframes fadeOutDown{ from{opacity:1; transform:translateY(0);} to{opacity:0; transform:translateY(100%);} }
.animating-out-up{ animation:fadeOutUp .15s ease-out forwards; }
.animating-in-up { animation:fadeInUp  .15s ease-out forwards; }
.animating-out-down{ animation:fadeOutDown .15s ease-out forwards; }
.animating-in-down { animation:fadeInDown .15s ease-out forwards; }


@keyframes spin{ 0%{transform:rotate(0);} 100%{transform:rotate(360deg);} }
@keyframes fadein{ from{bottom:0; opacity:0;} to{bottom:30px; opacity:1;} }
@keyframes fadeout{ from{bottom:30px; opacity:1;} to{bottom:0; opacity:0;} }

.slider:disabled::-webkit-slider-thumb {
  opacity: 1 !important;
  background: var(--secondary-color) !important; /* Forza anche il colore di sfondo */
}

.slider:disabled::-moz-range-thumb {
  opacity: 1 !important;
  background: var(--secondary-color) !important; /* Forza anche il colore di sfondo */
}
/* ===== Evita lo sbiadimento degli slider disabilitati (Safari/iOS) ===== */
input[type="range"][disabled],
.slider:disabled {
  opacity: 1 !important;                      /* niente “trasparente” */
  background: var(--primary-text-color) !important; /* track pieno */
}

/* Track/pallino WebKit (Safari/Chrome mobile) */
input[type="range"][disabled]::-webkit-slider-runnable-track,
.slider:disabled::-webkit-slider-runnable-track {
  opacity: 1 !important;
  background: var(--primary-text-color) !important;
}

input[type="range"][disabled]::-webkit-slider-thumb,
.slider:disabled::-webkit-slider-thumb {
  opacity: 1 !important;
  background: var(--secondary-color) !important;
  border-color: var(--primary-color) !important;
}

/* Track/pallino Firefox */
input[type="range"][disabled]::-moz-range-track {
  opacity: 1 !important;
  background: var(--primary-text-color) !important;
}
input[type="range"][disabled]::-moz-range-thumb {
  opacity: 1 !important;
  background: var(--secondary-color) !important;
  border-color: var(--primary-color) !important;
}

/* Se il form viene disabilitato via <fieldset disabled>, forziamo comunque visibile lo slider */
fieldset[disabled] input[type="range"],
fieldset[disabled] input[type="range"]::-webkit-slider-runnable-track,
fieldset[disabled] input[type="range"]::-webkit-slider-thumb,
fieldset[disabled] input[type="range"]::-moz-range-track,
fieldset[disabled] input[type="range"]::-moz-range-thumb {
  opacity: 1 !important;
}

/* Blocca l'interazione ma non la resa visiva (se usi una classe “is-disabled” sul form) */
.is-disabled input[type="range"] { pointer-events: none; }
/* Coerenza visiva del track anche quando NON è disabilitato */
.slider {
  background: var(--primary-text-color);
}
/* Il pallino resta “solido” su iOS durante transizioni di stato */
.slider::-webkit-slider-thumb {
  will-change: transform;
}
/* Blocca interazione slider senza sbiadire */
.is-locked input[type="range"],
.is-locked .slider { pointer-events: none; }

.is-locked .slider,
.is-locked input[type="range"],
.is-locked .slider::-webkit-slider-runnable-track,
.is-locked .slider::-webkit-slider-thumb,
.is-locked input[type="range"]::-webkit-slider-runnable-track,
.is-locked input[type="range"]::-webkit-slider-thumb {
  opacity: 1 !important;
  filter: none !important;
}

/* (opzionale) lieve overlay per stato bloccato */
.slider-container.is-locked { position: relative; }
.slider-container.is-locked::after{
  content:""; position:absolute; inset:-6px; border-radius:12px;
  background: rgba(17,115,93,.10); pointer-events:none;
}

